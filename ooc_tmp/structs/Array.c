/* structs.Array source file, generated with ooc */
#include "Array.h"

lang__Void Array___defaults___impl(structs__Array *this)
{
	Iterable___defaults___impl((lang__Iterable *) this);
}

lang__Void Array___destroy___impl(structs__Array *this)
{
}

lang__Void Array_init_impl(structs__Array *this, lang__SizeT size)
{
	this->size = size;
	this->data = gc_calloc(size, Pointer_class()->size);
}

lang__Void Array_init_withData_impl(structs__Array *this, lang__Pointer data, lang__SizeT size)
{
	this->size = size;
	this->data = gc_calloc(size, this->T->size);
	memcpy(((lang__Pointer) (this->data)), ((lang__Pointer) (data)), ((lang__SizeT) (size * this->T->size)));
}

void Array_get_impl(structs__Array *this, lang__Pointer returnarg201, lang__Int i)
{
	if (i < 0 || i >= this->size)
	{
		Exception_throw(Exception_new(Array_class(), String_append(String_append(String_append(String_append("Attempting to access an array of size ", Int_toString(((lang__Int) this->size))), " at index "), Int_toString(i)), "\n")));
	}
	if (returnarg201)
	{
		memcpy(((lang__Pointer) (returnarg201)), ((lang__Pointer) (this->data + i * this->T->size)), ((lang__SizeT) (this->T->size)));
	}
	return;
}

lang__Void Array_set_impl(structs__Array *this, lang__Int i, uint8_t * value)
{
	if (i < 0 || i >= this->size)
	{
		Exception_throw(Exception_new(Array_class(), String_append(String_append(String_append(String_append("Attempting to set the value of an array of size ", Int_toString(((lang__Int) this->size))), " at index "), Int_toString(i)), "\n")));
	}
	memcpy(((lang__Pointer) (this->data + i * this->T->size)), ((lang__Pointer) (value)), ((lang__SizeT) (this->T->size)));
}

lang__Int Array_size_impl(structs__Array *this)
{
	return this->size;
}

lang__Iterator *Array_iterator_impl(structs__Array *this)
{
	return ((lang__Iterator *) ArrayIterator_new(this->T, this));
}

lang__SizeT Array_lastIndex_impl(structs__Array *this)
{
	return this->size - 1;
}

lang__Bool Array_isEmpty_impl(structs__Array *this)
{
	return this->size == 0;
}

lang__Void Array_each_impl(structs__Array *this, lang__Void (*f)())
{
	
	{
		lang__Int i;
		for (i = 0; i < this->size; i++)
		{
			lang__Class *val;
			Array_get(this, &(val), i);
			f(((uint8_t *) (val)));
		}
	};
}

lang__Class *Array_class()
{
	static lang__Bool __done__ = false;
	static structs__ArrayClass class = 
	{
		{
			{
				{
					.size = sizeof(structs__Array),
					.name = "Array",
				},
				.__defaults__ = (lang__Void (*)(lang__Object *)) Array___defaults___impl,
				.__destroy__ = (lang__Void (*)(lang__Object *)) Array___destroy___impl,
			},
			.iterator = (lang__Iterator * (*)(lang__Iterable *)) Array_iterator_impl,
		},
		.init = Array_init_impl,
		.init_withData = Array_init_withData_impl,
		.get = Array_get_impl,
		.set = Array_set_impl,
		.size = Array_size_impl,
		.lastIndex = Array_lastIndex_impl,
		.isEmpty = Array_isEmpty_impl,
		.each = Array_each_impl,
	};
	lang__Class *classPtr = (lang__Class *) &class;
	if(!__done__)
	{
		__done__ = true;
		classPtr->super = Iterable_class();
	}
	return classPtr;
}


lang__Void Array___defaults__(structs__Array *this)
{
	((lang__ObjectClass *)((lang__Object *)this)->class)->__defaults__((lang__Object *) this);
}


lang__Void Array___destroy__(structs__Array *this)
{
	((lang__ObjectClass *)((lang__Object *)this)->class)->__destroy__((lang__Object *) this);
}


lang__Void Array_init(structs__Array *this, lang__SizeT size)
{
	((structs__ArrayClass *)((lang__Object *)this)->class)->init((structs__Array *) this, size);
}


lang__Void Array_init_withData(structs__Array *this, lang__Pointer data, lang__SizeT size)
{
	((structs__ArrayClass *)((lang__Object *)this)->class)->init_withData((structs__Array *) this, data, size);
}


void Array_get(structs__Array *this, lang__Pointer returnarg201, lang__Int i)
{
	((structs__ArrayClass *)((lang__Object *)this)->class)->get((structs__Array *) this, returnarg201, i);
}


lang__Void Array_set(structs__Array *this, lang__Int i, uint8_t * value)
{
	((structs__ArrayClass *)((lang__Object *)this)->class)->set((structs__Array *) this, i, value);
}


lang__Int Array_size(structs__Array *this)
{
	return (lang__Int)((structs__ArrayClass *)((lang__Object *)this)->class)->size((structs__Array *) this);
}


lang__Iterator *Array_iterator(structs__Array *this)
{
	return (lang__Iterator *)((lang__IterableClass *)((lang__Object *)this)->class)->iterator((lang__Iterable *) this);
}


lang__SizeT Array_lastIndex(structs__Array *this)
{
	return (lang__SizeT)((structs__ArrayClass *)((lang__Object *)this)->class)->lastIndex((structs__Array *) this);
}


lang__Bool Array_isEmpty(structs__Array *this)
{
	return (lang__Bool)((structs__ArrayClass *)((lang__Object *)this)->class)->isEmpty((structs__Array *) this);
}


lang__Void Array_each(structs__Array *this, lang__Void (*f)())
{
	((structs__ArrayClass *)((lang__Object *)this)->class)->each((structs__Array *) this, f);
}


lang__Void Array___load__()
{
}


structs__Array *Array_new(lang__Class *T, lang__SizeT size)
{
	structs__Array *this = ((structs__Array *) Class_alloc(Array_class()));
	this->T = T;
	Array_init(this, ((lang__SizeT) (size)));
	return this;
}


structs__Array *Array_new_withData(lang__Class *T, lang__Pointer data, lang__SizeT size)
{
	structs__Array *this = ((structs__Array *) Class_alloc(Array_class()));
	this->T = T;
	Array_init_withData(this, ((lang__Pointer) (data)), ((lang__SizeT) (size)));
	return this;
}



lang__Void ArrayIterator___defaults___impl(structs__ArrayIterator *this)
{
	Iterator___defaults___impl((lang__Iterator *) this);
	this->i = 0;
}

lang__Void ArrayIterator___destroy___impl(structs__ArrayIterator *this)
{
}

lang__Void ArrayIterator_init_impl(structs__ArrayIterator *this, structs__Array *array)
{
	this->array = array;
}

lang__Bool ArrayIterator_hasNext_impl(structs__ArrayIterator *this)
{
	return this->i < this->array->size;
}

void ArrayIterator_next_impl(structs__ArrayIterator *this, lang__Pointer returnarg217)
{
	uint8_t value[this->T->size];
	Array_get(this->array, value, this->i);
	this->i += 1;
	if (returnarg217)
	{
		memcpy(((lang__Pointer) (returnarg217)), ((lang__Pointer) (value)), ((lang__SizeT) (this->T->size)));
	}
	return;
}

lang__Class *ArrayIterator_class()
{
	static lang__Bool __done__ = false;
	static structs__ArrayIteratorClass class = 
	{
		{
			{
				{
					.size = sizeof(structs__ArrayIterator),
					.name = "ArrayIterator",
				},
				.__defaults__ = (lang__Void (*)(lang__Object *)) ArrayIterator___defaults___impl,
				.__destroy__ = (lang__Void (*)(lang__Object *)) ArrayIterator___destroy___impl,
			},
			.hasNext = (lang__Bool (*)(lang__Iterator *)) ArrayIterator_hasNext_impl,
			.next = (lang__Void (*)(lang__Iterator *, lang__Pointer)) ArrayIterator_next_impl,
		},
		.init = ArrayIterator_init_impl,
	};
	lang__Class *classPtr = (lang__Class *) &class;
	if(!__done__)
	{
		__done__ = true;
		classPtr->super = Iterator_class();
	}
	return classPtr;
}


lang__Void ArrayIterator___defaults__(structs__ArrayIterator *this)
{
	((lang__ObjectClass *)((lang__Object *)this)->class)->__defaults__((lang__Object *) this);
}


lang__Void ArrayIterator___destroy__(structs__ArrayIterator *this)
{
	((lang__ObjectClass *)((lang__Object *)this)->class)->__destroy__((lang__Object *) this);
}


lang__Void ArrayIterator_init(structs__ArrayIterator *this, structs__Array *array)
{
	((structs__ArrayIteratorClass *)((lang__Object *)this)->class)->init((structs__ArrayIterator *) this, array);
}


lang__Bool ArrayIterator_hasNext(structs__ArrayIterator *this)
{
	return (lang__Bool)((lang__IteratorClass *)((lang__Object *)this)->class)->hasNext((lang__Iterator *) this);
}


void ArrayIterator_next(structs__ArrayIterator *this, lang__Pointer returnarg217)
{
	((lang__IteratorClass *)((lang__Object *)this)->class)->next((lang__Iterator *) this, returnarg217);
}


lang__Void ArrayIterator___load__()
{
}


structs__ArrayIterator *ArrayIterator_new(lang__Class *T, structs__Array *array)
{
	structs__ArrayIterator *this = ((structs__ArrayIterator *) Class_alloc(ArrayIterator_class()));
	this->T = T;
	ArrayIterator_init(this, ((structs__Array *) (array)));
	return this;
}


void __OP_IDX_Array_Int(lang__Pointer returnarg218, lang__Class *T, structs__Array *arr, lang__Int index)
{
	
	{
		uint8_t gcall377[T->size];
		Array_get(arr, gcall377, index);
		if (returnarg218)
		{
			memcpy(((lang__Pointer) (returnarg218)), ((lang__Pointer) (gcall377)), ((lang__SizeT) (T->size)));
		}
		return;
	};
}

lang__Void __OP_IDX_ASS_Array_Int_T(lang__Class *T, structs__Array *arr, lang__Int index, uint8_t * value)
{
	Array_set(arr, index, value);
}


lang__Void _structs_Array_load()
{
	static lang__Bool __done__ = false;
	if (!__done__)
	{
		__done__ = true;
		Array___load__();
		ArrayIterator___load__();
		_lang_Iterable_load();
		_lang_LLong_load();
		_lang_Float_load();
		_lang_Iterator_load();
		_lang_ooclib_load();
		_lang_Double_load();
		_lang_String_load();
		_lang_Exception_load();
		_lang_Bool_load();
		_lang_Char_load();
		_lang_Range_load();
		_lang_TypeInfo_load();
		_lang_Object_load();
		_lang_Interface_load();
		_lang_stdio_load();
		_lang_Int_load();
		_lang_String_load();
	}
}

